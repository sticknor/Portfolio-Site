{"ast":null,"code":"// React\nimport React,{useState,useEffect,createRef}from\"react\";import{formatWorkInfoLine}from\"./modules/formatWorkDetails\";import{Link}from\"react-router-dom\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function PageDateCollections(_ref){let{works,date,allWorksById,dateCollections}=_ref;const[collectionWorks,setCollectionWorks]=useState([]);const[isLoading,setIsLoading]=useState(true);const[fullScreenIndex,setFullScreenIndex]=useState(undefined);const lightboxRef=/*#__PURE__*/createRef();const[touchStart,setTouchStart]=useState(0);const[touchEnd,setTouchEnd]=useState(0);const handleTouchStart=e=>{setTouchStart(e.targetTouches[0].clientX);};function handleTouchMove(e){setTouchEnd(e.targetTouches[0].clientX);}const handleTouchEnd=e=>{if(touchStart-touchEnd>50){// do your stuff here for left swipe\nsetFullScreenIndex((fullScreenIndex+1+collectionWorks.length)%collectionWorks.length);}if(touchStart-touchEnd<-50){// do your stuff here for right swipe\nsetFullScreenIndex((fullScreenIndex-1+collectionWorks.length)%collectionWorks.length);}};useEffect(()=>{if(Object.keys(allWorksById).length===0)return;else{setIsLoading(true);setCollectionWorks([]);// Clear the grid immediately when switching years\nsetFullScreenIndex(undefined);// Close any open lightbox when switching years\nlet _collectionWorks=[];works.forEach(function(workId){let workRecord=allWorksById[workId];_collectionWorks.push(workRecord);});setCollectionWorks([..._collectionWorks]);setIsLoading(false);}},[allWorksById,date]);useEffect(()=>{if(fullScreenIndex!==undefined){lightboxRef.current.focus();}},[fullScreenIndex,lightboxRef]);const handleKeyDown=e=>{if(e.key===\"Escape\"){setFullScreenIndex(undefined);}else if(e.key===\" \"||e.key===\"ArrowRight\"){e.preventDefault();setFullScreenIndex((fullScreenIndex+1+collectionWorks.length)%collectionWorks.length);}else if(e.key===\"ArrowLeft\"){setFullScreenIndex((fullScreenIndex-1+collectionWorks.length)%collectionWorks.length);}};// Remove the early return for loading to show year navigation during transitions\nlet fullScreenLightbox;if(fullScreenIndex!==undefined){// Show full screen record\nlet fullScreenWorkRecord=collectionWorks[fullScreenIndex];fullScreenLightbox=/*#__PURE__*/_jsxs(\"div\",{onKeyDown:handleKeyDown,tabIndex:\"-1\",ref:lightboxRef,style:{touchAction:\"none\",position:\"fixed\",top:\"0px\",left:\"0px\",right:\"0px\",bottom:\"0px\",background:\"rgba(0, 0, 0, .8)\",display:\"flex\",flexDirection:\"row\",flex:1,padding:\"64px\",gap:\"64px\",zIndex:1000,alignItems:\"center\"},className:\"upArrowOnHover mobilePaddingSmall\",onClick:()=>{setFullScreenIndex(undefined);},children:[/*#__PURE__*/_jsx(\"div\",{onTouchStart:handleTouchStart,onTouchEnd:handleTouchEnd,onTouchMove:handleTouchMove,style:{display:\"flex\",flex:1,width:\"100%\",justifyContent:\"center\",alignItems:\"center\"},children:/*#__PURE__*/_jsx(\"img\",{alt:\"artwork\",style:{width:\"auto\",height:\"100%\",maxHeight:\"90vh\",maxWidth:\"100%\",objectFit:\"contain\"},src:fullScreenWorkRecord.imageLink,className:\"rightArrowOnHover\",onClick:e=>{e.stopPropagation();setFullScreenIndex((fullScreenIndex+1+collectionWorks.length)%collectionWorks.length);}})}),(fullScreenWorkRecord.title||fullScreenWorkRecord.medium||fullScreenWorkRecord.year)&&/*#__PURE__*/_jsx(\"div\",{style:{background:\"linear-gradient(90deg,rgba(255, 255, 240, 1) 0%,rgba(246, 254, 255, 1) 100%)\",textAlign:\"left\",padding:\"32px\",cursor:\"default\",position:\"fixed\",bottom:\"0px\",right:\"0px\"},onClick:e=>{e.stopPropagation();},className:\"mobilePaddingSmall\",children:formatWorkInfoLine(fullScreenWorkRecord)})]});}return/*#__PURE__*/_jsxs(\"div\",{style:{marginTop:\"64px\",display:\"flex\",alignItems:\"center\",justifyContent:\"center\",flex:1,backgroundColor:\"#fff\"},children:[/*#__PURE__*/_jsxs(\"div\",{style:{display:\"flex\",flexDirection:\"column\",alignItems:\"center\",justifyContent:\"center\",padding:\"64px\",flex:1,gap:\"64px\"},className:\"mobileStack mobilePadding mobileGap\",children:[/*#__PURE__*/_jsx(\"div\",{style:{display:\"flex\",flexDirection:\"row\",alignItems:\"center\",justifyContent:\"center\",flex:1,gap:\"64px\"},className:\"mobileStack mobilePadding mobileGap\",children:Object.keys(dateCollections).sort().map((dateCollectionID,index)=>{return/*#__PURE__*/_jsx(Link,{to:`/${dateCollectionID}`,style:{textDecoration:\"none\",color:\"black\",fontWeight:dateCollectionID===date?600:400,textDecoration:dateCollectionID===date?\"underline\":\"none\"},className:dateCollectionID===date?\"\":\"clickable\",children:dateCollectionID},`menu-${dateCollectionID}`);})}),collectionWorks.length>0&&/*#__PURE__*/_jsx(\"div\",{style:{display:\"flex\",direction:\"row\",flexWrap:\"wrap\",alignItems:\"center\",justifyContent:\"center\",maxWidth:\"100%\",gap:\"32px\"},children:collectionWorks.map((work,i)=>{return/*#__PURE__*/_jsx(\"div\",{className:\"mobileLightboxOuterImage clickable\",style:{width:\"200px\",height:\"200px\",overflow:\"hidden\"},onClick:()=>{setFullScreenIndex(i);},children:/*#__PURE__*/_jsx(\"img\",{className:\"mobileLightboxInnerImage\",alt:\"artwork\",style:{width:\"300px\",height:\"300px\",marginLeft:\"-50px\",marginTop:\"-50px\",objectFit:\"cover\"},src:work.imageLink})});})})]}),fullScreenLightbox]});}export default PageDateCollections;","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}