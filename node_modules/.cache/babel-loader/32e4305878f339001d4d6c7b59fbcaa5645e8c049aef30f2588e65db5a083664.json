{"ast":null,"code":"// React\nimport React,{useState,useEffect,createRef}from\"react\";import{formatWorkInfoLine}from\"./modules/formatWorkDetails\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function PageCollections(_ref){let{collection,base,allWorksById}=_ref;const[collectionWorks,setCollectionWorks]=useState([]);const[isLoading,setIsLoading]=useState(true);const[fullScreenIndex,setFullScreenIndex]=useState(undefined);const lightboxRef=/*#__PURE__*/createRef();useEffect(()=>{if(Object.keys(allWorksById).length===0)setIsLoading(true);else{const tableName=collection.route;base(tableName).select({view:\"Grid view\"}).firstPage(function(err,records){if(err){console.error(err);return;}let _collectionWorks=[];records.forEach(function(record){let workId=record.get(\"Work\")[0];let workRecord=allWorksById[workId];_collectionWorks.push(workRecord);});setCollectionWorks([..._collectionWorks]);setIsLoading(false);});}},[allWorksById]);useEffect(()=>{if(fullScreenIndex!==undefined){lightboxRef.current.focus();}},[fullScreenIndex,lightboxRef]);const handleKeyDown=e=>{if(e.key===\"Escape\"){setFullScreenIndex(undefined);}else if(e.key===\" \"||e.key===\"ArrowRight\"){e.preventDefault();setFullScreenIndex((fullScreenIndex+1+collectionWorks.length)%collectionWorks.length);}else if(e.key===\"ArrowLeft\"){setFullScreenIndex((fullScreenIndex-1+collectionWorks.length)%collectionWorks.length);}};if(isLoading)return null;let fullScreenLightbox;if(fullScreenIndex!==undefined){// Show full screen record\nlet fullScreenWorkRecord=collectionWorks[fullScreenIndex];fullScreenLightbox=/*#__PURE__*/_jsxs(\"div\",{onKeyDown:handleKeyDown,tabIndex:\"-1\",ref:lightboxRef,style:{position:\"fixed\",top:\"0px\",left:\"0px\",right:\"0px\",bottom:\"0px\",background:\"rgba(0, 0, 0, .8)\",display:\"flex\",flexDirection:\"row\",flex:1,padding:\"64px\",gap:\"64px\",zIndex:1000,alignItems:\"center\"},className:\"upArrowOnHover mobilePadding\",onClick:()=>{setFullScreenIndex(undefined);},children:[/*#__PURE__*/_jsx(\"div\",{style:{display:\"flex\",flex:1,width:\"100%\",justifyContent:\"center\",alignItems:\"center\"},children:/*#__PURE__*/_jsx(\"img\",{alt:\"artwork\",style:{width:\"auto\",height:\"100%\",maxHeight:\"90vh\",maxWidth:\"100%\",objectFit:\"contain\"},src:fullScreenWorkRecord.imageLink,className:\"rightArrowOnHover\",onClick:e=>{e.stopPropagation();setFullScreenIndex((fullScreenIndex+1+collectionWorks.length)%collectionWorks.length);}})}),(fullScreenWorkRecord.title||fullScreenWorkRecord.medium||fullScreenWorkRecord.year)&&/*#__PURE__*/_jsx(\"div\",{style:{background:\"linear-gradient(90deg,rgba(255, 255, 240, 1) 0%,rgba(246, 254, 255, 1) 100%)\",textAlign:\"left\",padding:\"32px\",cursor:\"default\",position:\"fixed\",bottom:\"0px\",right:\"0px\"},onClick:e=>{e.stopPropagation();},className:\"mobilePadding\",children:formatWorkInfoLine(fullScreenWorkRecord)})]});}return/*#__PURE__*/_jsxs(\"div\",{style:{marginTop:\"64px\",backgroundColor:\"#fff\"},children:[/*#__PURE__*/_jsxs(\"div\",{style:{display:\"flex\",flexDirection:\"row\",padding:\"64px\",flex:1,gap:\"64px\"},className:\"mobileStack mobilePadding mobileGap\",children:[/*#__PURE__*/_jsx(\"div\",{style:{flex:1,display:\"flex\",justifyContent:\"space-between\",alignItems:\"space-between\",flexDirection:\"column\"},children:/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{style:{fontWeight:600,marginBottom:8},children:[collection.title,/*#__PURE__*/_jsxs(\"div\",{style:{opacity:0.6,fontWeight:500},children:[\" â€” \",collection.years]})]}),collection.collectionStatement&&/*#__PURE__*/_jsx(\"div\",{style:{borderLeft:\"1px solid black\",padding:24,paddingBottom:0,whiteSpace:\"pre-wrap\"},children:collection.collectionStatement})]})}),/*#__PURE__*/_jsx(\"div\",{style:{height:\"100%\",flex:2,display:\"flex\",overflow:\"auto\",WebkitOverflowScrolling:\"touch\"},children:/*#__PURE__*/_jsx(\"div\",{style:{display:\"flex\",direction:\"row\",flexWrap:\"wrap\",maxWidth:\"100%\",gap:\"32px\"},children:collectionWorks.map((work,i)=>{return/*#__PURE__*/_jsx(\"div\",{className:\"mobileLightboxOuterImage\",style:{width:\"200px\",height:\"200px\",overflow:\"hidden\"},onClick:()=>{setFullScreenIndex(i);},children:/*#__PURE__*/_jsx(\"img\",{className:\"mobileLightboxInnerImage\",alt:\"artwork\",style:{width:\"300px\",height:\"300px\",marginLeft:\"-50px\",marginTop:\"-50px\",objectFit:\"cover\"},src:work.imageLink})});})})})]}),fullScreenLightbox]});}export default PageCollections;","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}